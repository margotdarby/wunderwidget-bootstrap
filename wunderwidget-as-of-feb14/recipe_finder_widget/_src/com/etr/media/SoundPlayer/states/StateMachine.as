package com.etr.media.SoundPlayer.states{	import com.etr.media.SoundPlayer.utils.*;		import com.etr.media.SoundPlayer.events.*;		//import com.etr.media.SoundPlayer.states.*;		import flash.events.EventDispatcher;	public class StateMachine extends EventDispatcher{			//-------------------------------------------------------------	// STATIC VARIABLES	//-------------------------------------------------------------					public static const PLAYING					:String				=			"playing";		public static const STOPPED					:String				=			"stopped";		public static const PAUSED					:String				=			"paused";		public static const LOADING					:String				=			"loading";			//-------------------------------------------------------------	// PRIVATE VARIABLES	//-------------------------------------------------------------		private var _sound					:SoundPlayerSound;				private var _state					:AbstractPlayerState;				private var _stateName				:String;		//-------------------------------------------------------------	// CONSTRUCTOR	//-------------------------------------------------------------				public function StateMachine($sound:SoundPlayerSound){						_sound				=			$sound;						init();					}	//-------------------------------------------------------------	// INIT	//-------------------------------------------------------------		private function init():void{						initVars();			initProperties();			initListeners();					}				private function initVars():void{					_stateName			=		"";							}				private function initProperties():void{					}				private function initListeners():void{					}	//-------------------------------------------------------------	// PRIVATE METHODS		//-------------------------------------------------------------			//-------------------------------------------------------------	// EVENT HANDLERS	//-------------------------------------------------------------		//-------------------------------------------------------------	// GETTER / SETTERS	//-------------------------------------------------------------			public function get state():String{			return _stateName;		}	//-------------------------------------------------------------	// PUBLIC METHODS	//-------------------------------------------------------------		public function setState($state:String):void{						_stateName 			=		$state;			switch($state){												case PLAYING:					_state		=		new PlayingState(_sound);					break;				case STOPPED:					_state		=		new StoppedState(_sound);					break;				case PAUSED:					_state		=		new PausedState(_sound);					break;				case LOADING:					_state		=		new LoadingState(_sound);					break;				default:					_state		=		null;								}						dispatchEvent(new SoundPlayerEvent(SoundPlayerEvent.STATE_CHANGE));		}				public function play():void{						_state.play();						setState(PLAYING);					}				public function stop():void{						_state.stop();						setState(STOPPED);					}				public function pause():void{						_state.pause();						setState(PAUSED);					}				public function load($path:String):void{						_state.load($path);						setState(LOADING);					}			//-------------------------------------------------------------	// END OF CLASS		//-------------------------------------------------------------	}}